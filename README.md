# å·¥ä½œæµç¼–æ’ç³»ç»Ÿ (Orchestrator)

åŸºäº Go + Vue.js çš„ç°ä»£åŒ–å·¥ä½œæµç¼–æ’ç³»ç»Ÿï¼Œæ”¯æŒå¯è§†åŒ–æµç¨‹ç®¡ç†å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡æ‰§è¡Œã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **æ­¥éª¤ç®¡ç†**: æ”¯æŒ Shellã€HTTPã€Function å¤šç§æ‰§è¡Œå™¨ç±»å‹
- **æ¨¡æ¿ç®¡ç†**: å¯è§†åŒ–å·¥ä½œæµæ¨¡æ¿è®¾è®¡ï¼Œæ”¯æŒDAGå›¾å±•ç¤º
- **æ‰§è¡Œç®¡ç†**: å®æ—¶ç›‘æ§æ‰§è¡ŒçŠ¶æ€ï¼Œæ”¯æŒæ—¥å¿—æŸ¥çœ‹å’Œä»»åŠ¡æ§åˆ¶
- **ç°ä»£åŒ–ç•Œé¢**: åŸºäº Ant Design Vue 3.0 çš„ç¾è§‚ç®¡ç†ç•Œé¢
- **æ•°æ®åº“æ”¯æŒ**: ä¼˜å…ˆä½¿ç”¨ MySQLï¼Œè‡ªåŠ¨é™çº§åˆ° SQLite
- **RESTful API**: å®Œæ•´çš„ API æ¥å£ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **è¯­è¨€**: Go 1.21+
- **æ¡†æ¶**: Gin + GORM
- **æ•°æ®åº“**: MySQL (ä¸») / SQLite (å¤‡)
- **æ—¥å¿—**: Logrus

### å‰ç«¯
- **æ¡†æ¶**: Vue.js 3.0 + TypeScript
- **UIç»„ä»¶**: Ant Design Vue 3.0
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4.0
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ„å»ºå·¥å…·**: Vite

## ğŸ“¦ å®‰è£…ä¸å¯åŠ¨

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- Node.js 18+
- MySQL 8.0+ (å¯é€‰ï¼Œä¼šè‡ªåŠ¨é™çº§åˆ° SQLite)

### å¿«é€Ÿå¯åŠ¨

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd orchestrator

# ä¸€é”®å¯åŠ¨ (åŒ…å«ç¼–è¯‘ã€æ„å»ºã€å¯åŠ¨æ‰€æœ‰æœåŠ¡)
./scripts/start.sh

# ç›´æ¥ä½¿ç”¨å¼€å‘ç¯å¢ƒè„šæœ¬
./scripts/dev/start.sh

# è®¿é—®ç®¡ç†ç•Œé¢
# å‰ç«¯: http://localhost:3000
# åç«¯API: http://localhost:8080
```

### æ‰‹åŠ¨å¯åŠ¨

```bash
# 1. ç¼–è¯‘åç«¯
cd cmd/web
go build -o ../../bin/web main.go
cd ../..

# 2. æ„å»ºå‰ç«¯
cd web/frontend
npm install
npm run build
cd ../..

# 3. å¯åŠ¨åç«¯
./bin/web

# 4. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (æ–°ç»ˆç«¯)
cd web/frontend
npm run dev
```

### åœæ­¢æœåŠ¡

```bash
# ä¸»è¦æ–¹å¼
./scripts/stop.sh

# ç›´æ¥ä½¿ç”¨å¼€å‘ç¯å¢ƒè„šæœ¬
./scripts/dev/stop.sh
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®

ç³»ç»Ÿä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é»˜è®¤å€¼è¿›è¡Œé…ç½®ï¼š

```bash
# MySQL é…ç½® (ä¼˜å…ˆä½¿ç”¨)
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=root123456
DB_DATABASE=orchestrator
DB_CHARSET=utf8mb4

# æœåŠ¡å™¨é…ç½®
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
```

å¦‚æœ MySQL è¿æ¥å¤±è´¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ SQLite æ•°æ®åº“ã€‚

## ğŸ“š API æ–‡æ¡£

### å¥åº·æ£€æŸ¥
```bash
GET /health
```

### æ­¥éª¤ç®¡ç†
```bash
GET    /api/v1/steps              # è·å–æ­¥éª¤åˆ—è¡¨
POST   /api/v1/steps              # åˆ›å»ºæ­¥éª¤
GET    /api/v1/steps/{id}         # è·å–æ­¥éª¤è¯¦æƒ…
PUT    /api/v1/steps/{id}         # æ›´æ–°æ­¥éª¤
DELETE /api/v1/steps/{id}         # åˆ é™¤æ­¥éª¤
POST   /api/v1/steps/{id}/validate # éªŒè¯æ­¥éª¤
```

### æ¨¡æ¿ç®¡ç†
```bash
GET    /api/v1/templates              # è·å–æ¨¡æ¿åˆ—è¡¨
POST   /api/v1/templates              # åˆ›å»ºæ¨¡æ¿
GET    /api/v1/templates/{id}         # è·å–æ¨¡æ¿è¯¦æƒ…
PUT    /api/v1/templates/{id}         # æ›´æ–°æ¨¡æ¿
DELETE /api/v1/templates/{id}         # åˆ é™¤æ¨¡æ¿
GET    /api/v1/templates/{id}/dag     # è·å–æ¨¡æ¿DAGç»“æ„
POST   /api/v1/templates/{id}/steps   # å‘æ¨¡æ¿æ·»åŠ æ­¥éª¤
DELETE /api/v1/templates/{id}/steps/{stepId} # ä»æ¨¡æ¿ç§»é™¤æ­¥éª¤
```

### æ‰§è¡Œç®¡ç†
```bash
GET    /api/v1/executions              # è·å–æ‰§è¡Œåˆ—è¡¨
POST   /api/v1/executions              # åˆ›å»ºæ‰§è¡Œ
GET    /api/v1/executions/{id}         # è·å–æ‰§è¡Œè¯¦æƒ…
POST   /api/v1/executions/{id}/start   # å¯åŠ¨æ‰§è¡Œ
POST   /api/v1/executions/{id}/cancel  # å–æ¶ˆæ‰§è¡Œ
GET    /api/v1/executions/{id}/logs    # è·å–æ‰§è¡Œæ—¥å¿—
GET    /api/v1/executions/{id}/status  # è·å–æ‰§è¡ŒçŠ¶æ€
```

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
orchestrator/
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ executor/           # æ‰§è¡Œå™¨å‘½ä»¤è¡Œå·¥å…·
â”‚   â””â”€â”€ web/               # WebæœåŠ¡ä¸»ç¨‹åº
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±å’Œå¤„ç†å™¨
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ dal/               # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ engine/            # æ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ model/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ store/             # å­˜å‚¨å±‚
â”œâ”€â”€ web/
â”‚   â””â”€â”€ frontend/          # Vue.jså‰ç«¯é¡¹ç›®
â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”œâ”€â”€ bin/                   # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ scripts/               # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ start.sh           # ä¸»å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ stop.sh            # ä¸»åœæ­¢è„šæœ¬
â”‚   â”œâ”€â”€ dev/               # å¼€å‘ç¯å¢ƒè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ start.sh       # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”‚   â”‚   â””â”€â”€ stop.sh        # å¼€å‘ç¯å¢ƒåœæ­¢è„šæœ¬
â”‚   â”œâ”€â”€ build/             # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ deploy/            # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ test/              # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ utils/             # å·¥å…·è„šæœ¬
â””â”€â”€ CLAUDE.md              # é¡¹ç›®é…ç½®æ–‡æ¡£
```

## ğŸ” å¼€å‘è°ƒè¯•

### æŸ¥çœ‹æ—¥å¿—
```bash
# åç«¯æ—¥å¿—
tail -f web.log

# å‰ç«¯å¼€å‘æœåŠ¡å™¨æ—¥å¿—
# åœ¨å‰ç«¯å¯åŠ¨ç»ˆç«¯æŸ¥çœ‹
```

### æ•°æ®åº“ç®¡ç†
```bash
# æŸ¥çœ‹ SQLite æ•°æ®åº“
sqlite3 orchestrator.db ".tables"
sqlite3 orchestrator.db ".schema"
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸ“– å®Œæ•´æ–‡æ¡£
- [ğŸ“ æ–‡æ¡£ä¸­å¿ƒ](./docs/) - å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£å’ŒæŒ‡å—

### ğŸ—ï¸ æ¶æ„è®¾è®¡
- [ç³»ç»Ÿæ¶æ„æ¦‚è¿°](./docs/architecture/) - ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡
- [æ•°æ®æ¨¡å‹è®¾è®¡](./docs/architecture/) - æ•°æ®åº“è¡¨ç»“æ„å’Œå…³ç³»

### ğŸš€ åŠŸèƒ½ç‰¹æ€§
- [åŠŸèƒ½å®ç°æ€»ç»“](./docs/features/åŠŸèƒ½å®ç°æ€»ç»“.md) - ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½æ¦‚è¿°
- [DAGå›¾å¯è§†åŒ–ä¼˜åŒ–](./docs/features/DAGå›¾å¯è§†åŒ–ä¼˜åŒ–æ€»ç»“.md) - å¯è§†åŒ–å·¥ä½œæµå›¾
- [æ¨¡æ¿å¤šä¾èµ–å…³ç³»](./docs/features/æ¨¡æ¿å¤šä¾èµ–å…³ç³»å®ç°æ€»ç»“.md) - å¤æ‚ä¾èµ–å…³ç³»æ”¯æŒ

### ğŸ› ï¸ å¼€å‘æŒ‡å—
- [Webåº”ç”¨å¼€å‘](./docs/development/) - å‰ç«¯å¼€å‘æŒ‡å—å’ŒAPIè¯´æ˜
- [å¼€å‘ç¯å¢ƒæ­å»º](./docs/development/) - å¼€å‘ç¯å¢ƒé…ç½®

### ğŸ“¡ APIæ–‡æ¡£
- [RESTful API](./docs/api/) - å®Œæ•´çš„APIæ¥å£æ–‡æ¡£

### ğŸš€ éƒ¨ç½²è¿ç»´
- [éƒ¨ç½²æŒ‡å—](./docs/deployment/) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®
- [è¿ç»´ç›‘æ§](./docs/deployment/) - æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§

### ğŸ§ª æµ‹è¯•æ–‡æ¡£
- [æµ‹è¯•ç­–ç•¥](./docs/testing/) - æµ‹è¯•æ–¹æ¡ˆå’Œè¦†ç›–èŒƒå›´

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚